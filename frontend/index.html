<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KWASU Lost & Found Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: #1a5276;
            --secondary-color: #2980b9;
            --accent-color: #f39c12;
            --light-bg: #ecf0f1;
            --supporter-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-bg);
            color: #333;
        }
        
        .hero-section {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 4rem 0;
            text-align: center;
        }
        
        .hero-section h1 {
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .hero-section p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .section-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 2rem;
            margin-bottom: 2rem;
            transition: transform 0.3s ease;
        }
        
        .section-card:hover {
            transform: translateY(-5px);
        }
        
        .section-title {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
            color: var(--accent-color);
        }
        
        .form-control, .form-select {
            border-radius: 8px;
            border: 1px solid #ddd;
            padding: 12px;
        }
        
        .btn-primary {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
            border-radius: 8px;
            padding: 10px 20px;
            font-weight: 600;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .search-results {
            margin-top: 2rem;
        }
        
        .result-item {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-left: 4px solid var(--accent-color);
        }
        
        .result-item h5 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .result-item .meta {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        
        .result-item .meta i {
            margin-right: 5px;
        }
        
        .badge {
            font-size: 0.8rem;
            padding: 5px 10px;
        }
        
        .badge-lost {
            background-color: #e74c3c;
        }
        
        .badge-found {
            background-color: #2ecc71;
        }
        
        .badge-recovered {
            background-color: #17a2b8;
        }
        
        .footer {
            background-color: var(--primary-color);
            color: white;
            padding: 2rem 0;
            margin-top: 4rem;
            text-align: center;
        }
        
        .footer a {
            color: var(--accent-color);
            text-decoration: none;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
        }
        
        .toast {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .toast-success {
            border-left: 4px solid #2ecc71;
        }
        
        .toast-error {
            border-left: 4px solid #e74c3c;
        }
        
        .toast-body {
            position: relative;
        }
        
        .loading-spinner {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .platform-icons {
            margin-top: 1rem;
        }
        
        .platform-icons a {
            color: white;
            font-size: 1.5rem;
            margin: 0 10px;
            transition: transform 0.3s ease;
        }
        
        .platform-icons a:hover {
            transform: scale(1.2);
        }
        
        .whatsapp-note {
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 10px 15px;
            margin-bottom: 15px;
            border-radius: 4px;
        }
        
        .safety-tips {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .safety-tips h5 {
            color: #856404;
            margin-bottom: 10px;
        }
        
        .safety-tips ul {
            margin-bottom: 0;
            padding-left: 20px;
        }
        
        .safety-tips li {
            margin-bottom: 8px;
            color: #856404;
        }
        
        .safety-tips li:last-child {
            margin-bottom: 0;
        }
        
        .safety-tips i {
            color: #ffc107;
            margin-right: 8px;
        }
        
        /* Simple Section Break */
        .section-break {
            height: 2px;
            background: linear-gradient(to right, transparent, #ddd, transparent);
            margin: 3rem 0;
        }
        
        /* Enhanced Supporters Section */
        .supporters-section {
            background: var(--supporter-gradient);
            border-radius: 15px;
            padding: 2rem;
            margin-top: 1rem;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .supporters-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(0.8); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 0.8; }
            100% { transform: scale(0.8); opacity: 0.5; }
        }
        
        .supporters-header {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
            z-index: 1;
        }
        
        .supporters-counter {
            font-size: 3rem;
            font-weight: bold;
            margin: 1rem 0;
            display: inline-block;
            min-width: 80px;
        }
        
        .supporters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .supporter-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1.2rem;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 1;
        }
        
        .supporter-card:hover {
            transform: translateY(-5px) scale(1.02);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .supporter-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 0.8rem;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .supporter-avatar::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #ff6ec7, #7873f5, #4bcffa, #f093fb);
            border-radius: 50%;
            z-index: -1;
            animation: rotate 3s linear infinite;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .supporter-name {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.4rem;
        }
        
        .supporter-role {
            font-size: 0.85rem;
            opacity: 0.8;
            margin-bottom: 0.4rem;
        }
        
        .supporter-department {
            font-size: 0.8rem;
            opacity: 0.7;
            font-style: italic;
        }
        
        .toggle-supporters-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
        }
        
        .toggle-supporters-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .collapse {
            transition: max-height 0.5s ease;
        }
        
        .supporter-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--accent-color);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        /* Floating particles animation */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
        }
        
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            pointer-events: none;
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Matching Items Modal */
        .matching-item-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--accent-color);
        }
        
        .matching-item-card h5 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .matching-item-card .detail-row {
            display: flex;
            margin-bottom: 0.75rem;
        }
        
        .matching-item-card .detail-label {
            font-weight: 600;
            width: 120px;
            color: #555;
        }
        
        .matching-item-card .detail-value {
            flex: 1;
        }
        
        .matching-item-card .contact-btn {
            margin-top: 1rem;
            display: inline-block;
            background-color: #25D366;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        
        .matching-item-card .contact-btn:hover {
            background-color: #128C7E;
            color: white;
        }
        
        /* Verification Modal */
        .modal-content {
            border-radius: 15px;
            border: none;
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 15px 15px 0 0;
            border: none;
        }
        
        .modal-title {
            font-weight: 600;
        }
        
        .modal-body {
            padding: 2rem;
        }
        
        /* Founder Details Modal */
        .founder-details {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .founder-details h5 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .founder-details .detail-row {
            display: flex;
            margin-bottom: 0.75rem;
        }
        
        .founder-details .detail-label {
            font-weight: 600;
            width: 120px;
            color: #555;
        }
        
        .founder-details .detail-value {
            flex: 1;
        }
        
        .founder-details .contact-btn {
            margin-top: 1rem;
            display: inline-block;
            background-color: #25D366;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        
        .founder-details .contact-btn:hover {
            background-color: #128C7E;
            color: white;
        }
        
        /* Found Item Actions */
        .found-item-actions {
            margin-top: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .claimed-status {
            background-color: #28a745;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        /* New styles for report details modal */
        .report-details-modal .modal-dialog {
            max-width: 600px;
        }
        
        .report-details-card {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .report-details-card h5 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }
        
        .report-details-card .detail-row {
            display: flex;
            margin-bottom: 1rem;
        }
        
        .report-details-card .detail-label {
            font-weight: 600;
            width: 140px;
            color: #555;
        }
        
        .report-details-card .detail-value {
            flex: 1;
        }
        
        .verification-code-box {
            background-color: #e9ecef;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
            letter-spacing: 2px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .verification-code-box:hover {
            background-color: #dee2e6;
            transform: scale(1.02);
        }
        
        .copy-tooltip {
            position: absolute;
            background-color: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .copy-tooltip.show {
            opacity: 1;
        }
        
        .toast-action-btn {
            margin-top: 10px;
        }
        
        .safety-alert {
            background-color: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            border-radius: 8px;
            margin-top: 1rem;
        }
        
        .safety-alert h6 {
            color: #721c24;
            margin-bottom: 10px;
        }
        
        .safety-alert p {
            color: #721c24;
            margin-bottom: 0;
        }
        
        .verification-input-group {
            margin: 1.5rem 0;
        }
        
        .verification-input {
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
            letter-spacing: 3px;
        }
        
        .forgot-code-tip {
            font-size: 0.85rem;
            color: #6c757d;
            margin-top: 10px;
            text-align: center;
            font-style: italic;
        }
        
        .guide-section {
            background-color: #e7f3ff;
            border-left: 4px solid #0066cc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 1rem;
        }
        
        .guide-section h6 {
            color: #004c99;
            margin-bottom: 10px;
        }
        
        .guide-section ol {
            color: #004c99;
            padding-left: 20px;
        }
        
        .guide-section li {
            margin-bottom: 8px;
        }
        
        .guide-section li:last-child {
            margin-bottom: 0;
        }
        
        .importance-note {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-top: 1rem;
        }
        
        .importance-note h6 {
            color: #856404;
            margin-bottom: 10px;
        }
        
        .importance-note p {
            color: #856404;
            margin-bottom: 0;
        }
        
        .mark-as-recovered-btn {
            background-color: #17a2b8;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .mark-as-recovered-btn:hover {
            background-color: #138496;
            color: white;
        }
        
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .verification-modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }
        
        .modal-icon {
            font-size: 3rem;
            color: var(--accent-color);
            margin-bottom: 1rem;
            text-align: center;
        }
        
        .lost-verification-modal .modal-body {
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <h1>KWASU Lost & Found Portal</h1>
            <p>Report lost items, found items, or search for your belongings across all platforms</p>
            <div class="platform-icons">
                <a href="https://t.me/KwasuLostFound_Bot" target="_blank" title="Telegram Bot"><i class="bi bi-telegram"></i></a>
                <a href="https://wa.link/9765zr" target="_blank" title="WhatsApp Bot"><i class="bi bi-whatsapp"></i></a>
            </div>
        </div>
    </section>

    <div class="container my-5">
        <div class="row">
            <!-- Report Lost Item Section -->
            <div class="col-lg-6 mb-4">
                <div class="section-card">
                    <h3 class="section-title">
                        <i class="bi bi-search"></i> Report Lost Item
                    </h3>
                    <div class="whatsapp-note">
                        <i class="bi bi-whatsapp"></i> <strong>Important:</strong> Please provide your WhatsApp number for faster communication.
                    </div>
                    <form id="lost-item-form">
                        <div class="mb-3">
                            <label for="lost-item" class="form-label">Item Name</label>
                            <input type="text" class="form-control" id="lost-item" placeholder="e.g., Water Bottle, Wallet, Phone" required>
                        </div>
                        <div class="mb-3">
                            <label for="lost-location" class="form-label">Location</label>
                            <input type="text" class="form-control" id="lost-location" placeholder="e.g., Library, Cafeteria, Lecture Hall" required>
                        </div>
                        <div class="mb-3">
                            <label for="lost-last-seen" class="form-label">Last Seen Location (if known)</label>
                            <input type="text" class="form-control" id="lost-last-seen" placeholder="e.g., Near the library entrance, Cafeteria table 5">
                        </div>
                        <div class="mb-3">
                            <label for="lost-description" class="form-label">Description</label>
                            <textarea class="form-control" id="lost-description" rows="3" placeholder="Provide details about your item (color, brand, unique features, etc.)" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="lost-contact" class="form-label">Your WhatsApp Number</label>
                            <input type="tel" class="form-control" id="lost-contact" placeholder="e.g., 08012345678" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Report Lost Item</button>
                    </form>
                </div>
            </div>

            <!-- Report Found Item Section -->
            <div class="col-lg-6 mb-4">
                <div class="section-card">
                    <h3 class="section-title">
                        <i class="bi bi-gift"></i> Report Found Item
                    </h3>
                    <div class="whatsapp-note">
                        <i class="bi bi-whatsapp"></i> <strong>Important:</strong> Please provide your WhatsApp number for faster communication.
                    </div>
                    <form id="found-item-form">
                        <div class="mb-3">
                            <label for="found-item" class="form-label">Item Name</label>
                            <input type="text" class="form-control" id="found-item" placeholder="e.g., Keys, ID Card, Notebook" required>
                        </div>
                        <div class="mb-3">
                            <label for="found-location" class="form-label">Location</label>
                            <input type="text" class="form-control" id="found-location" placeholder="e.g., Parking Lot, Classroom, Sports Complex" required>
                        </div>
                        <div class="mb-3">
                            <label for="found-contact" class="form-label">Your WhatsApp Number</label>
                            <input type="tel" class="form-control" id="found-contact" placeholder="e.g., 08012345678" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Report Found Item</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Search Section -->
        <div class="section-card">
            <h3 class="section-title">
                <i class="bi bi-search"></i> Search for Items
            </h3>
            <div class="row">
                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" class="form-control" id="search-input" placeholder="Enter keywords (e.g., water, keys, bag)">
                        <button class="btn btn-primary" type="button" id="search-btn">Search</button>
                    </div>
                </div>
                <div class="col-md-4">
                    <select class="form-select" id="filter-type">
                        <option value="all">All Items</option>
                        <option value="lost">Lost Items Only</option>
                        <option value="found">Found Items Only</option>
                    </select>
                </div>
            </div>
            
            <div class="loading-spinner" id="search-loading">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p>Searching for items...</p>
            </div>
            
            <div class="search-results" id="search-results"></div>
        </div>

        <!-- Safety Tips Section -->
        <div class="section-card">
            <h3 class="section-title">
                <i class="bi bi-shield-check"></i> Safety Tips
            </h3>
            <div class="alert alert-warning">
                <i class="bi bi-exclamation-triangle-fill"></i> <strong>Important:</strong> These safety guidelines are for school safety and to prevent scams. Please follow them carefully.
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="safety-tips">
                        <h5><i class="bi bi-person-x"></i> For Lost Item Reporters</h5>
                        <ul>
                            <li>When someone contacts you claiming to have found your item, ask for specific details to verify ownership</li>
                            <li>Never share personal information beyond what is necessary</li>
                            <li>Meet in a safe, public place on campus to retrieve your item</li>
                            <li>If you suspect a scam, report the person's number to KWASU Safety Unit or contact the developer</li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="safety-tips">
                        <h5><i class="bi bi-person-check"></i> For Found Item Reporters</h5>
                        <ul>
                            <li>When someone claims an item, ask for evidence of ownership (specific details, photos, etc.)</li>
                            <li>Do not return the item until you are confident about the claimant's identity</li>
                            <li>If you notice a false claim, report the person's number to KWASU Safety Unit immediately</li>
                            <li>You can also contact the developer for assistance in reporting false claimants</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="mt-3 p-3 bg-light rounded">
                <h6 class="text-center"><i class="bi bi-info-circle"></i> How to Report Suspicious Activity</h6>
                <p class="mb-0 text-center">
                    <strong>KWASU Safety Unit:</strong> Contact campus security | 
                    <strong>Developer:</strong> <a href="tel:09038323588">Rugged</a>
                </p>
            </div>
        </div>

        <!-- Simple Section Break -->
        <div class="section-break"></div>

        <!-- Top Supporters Section -->
        <div class="section-card">
            <h3 class="section-title">
                <i class="bi bi-people"></i> Top Supporters
            </h3>
            <p>We extend our heartfelt gratitude to the following individuals who supported this project:</p>
            
            <div class="supporters-section">
                <div class="particles" id="particles"></div>
                
                <div class="supporters-header">
                    <p>Meet our amazing supporters</p>
                    <div class="supporters-counter" id="supporters-counter">0</div>
                    <p>Incredible Contributors</p>
                    
                    <button class="btn toggle-supporters-btn" type="button" data-bs-toggle="collapse" data-bs-target="#supporters-list" aria-expanded="false" aria-controls="supporters-list">
                        <i class="bi bi-chevron-down"></i> <span id="toggle-text">View Supporters</span>
                    </button>
                </div>
                
                <div class="collapse mt-4" id="supporters-list">
                    <div class="supporters-grid">
                        <div class="supporter-card">
                            <div class="supporter-badge">1</div>
                            <div class="supporter-avatar">FN</div>
                            <div class="supporter-name">Full Name One</div>
                            <div class="supporter-role">Project Mentor</div>
                            <div class="supporter-department">(Computer Science Dpt.)</div>
                        </div>
                        
                        <div class="supporter-card">
                            <div class="supporter-badge">2</div>
                            <div class="supporter-avatar">FN</div>
                            <div class="supporter-name">Full Name Two</div>
                            <div class="supporter-role">Technical Advisor</div>
                            <div class="supporter-department">(Mass Comm. Dpt.)</div>
                        </div>
                        
                        <div class="supporter-card">
                            <div class="supporter-badge">3</div>
                            <div class="supporter-avatar">FN</div>
                            <div class="supporter-name">Full Name Three</div>
                            <div class="supporter-role">Design Contributor</div>
                            <div class="supporter-department">(Fine Arts Dpt.)</div>
                        </div>
                        
                        <div class="supporter-card">
                            <div class="supporter-badge">4</div>
                            <div class="supporter-avatar">FN</div>
                            <div class="supporter-name">Full Name Four</div>
                            <div class="supporter-role">Content Creator</div>
                            <div class="supporter-department">(English Dpt.)</div>
                        </div>
                        
                        <div class="supporter-card">
                            <div class="supporter-badge">5</div>
                            <div class="supporter-avatar">FN</div>
                            <div class="supporter-name">Full Name Five</div>
                            <div class="supporter-role">Community Manager</div>
                            <div class="supporter-department">(Sociology Dpt.)</div>
                        </div>
                        
                        <div class="supporter-card">
                            <div class="supporter-badge">6</div>
                            <div class="supporter-avatar">FN</div>
                            <div class="supporter-name">Full Name Six</div>
                            <div class="supporter-role">Beta Tester</div>
                            <div class="supporter-department">(Mathematics Dpt.)</div>
                        </div>
                        
                        <div class="supporter-card">
                            <div class="supporter-badge">7</div>
                            <div class="supporter-avatar">FN</div>
                            <div class="supporter-name">Full Name Seven</div>
                            <div class="supporter-role">Marketing Support</div>
                            <div class="supporter-department">(Business Admin Dpt.)</div>
                        </div>
                        
                        <div class="supporter-card">
                            <div class="supporter-badge">8</div>
                            <div class="supporter-avatar">FN</div>
                            <div class="supporter-name">Full Name Eight</div>
                            <div class="supporter-role">Documentation</div>
                            <div class="supporter-department">(Library Science Dpt.)</div>
                        </div>
                        
                        <div class="supporter-card">
                            <div class="supporter-badge">9</div>
                            <div class="supporter-avatar">FN</div>
                            <div class="supporter-name">Full Name Nine</div>
                            <div class="supporter-role">Feedback Provider</div>
                            <div class="supporter-department">(Psychology Dpt.)</div>
                        </div>
                        
                        <div class="supporter-card">
                            <div class="supporter-badge">10</div>
                            <div class="supporter-avatar">FN</div>
                            <div class="supporter-name">Full Name Ten</div>
                            <div class="supporter-role">Evangelist</div>
                            <div class="supporter-department">(Political Science Dpt.)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 KWASU Lost & Found Portal. Designed & Developed by Rugged of ICT.</p>
            <p>For support: <a href="tel:09038323588">09038323588</a></p>
        </div>
    </footer>

    <!-- Toast Container -->
    <div class="toast-container"></div>

    <!-- Report Details Modal -->
    <div class="modal fade report-details-modal" id="reportDetailsModal" tabindex="-1" aria-labelledby="reportDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="reportDetailsModalLabel">Report Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="reportDetailsContent">
                        <!-- Report details will be inserted here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Copy Tooltip -->
    <div class="copy-tooltip" id="copyTooltip">Copied to clipboard!</div>

    <!-- Matching Items Modal -->
    <div class="modal fade" id="matchingItemsModal" tabindex="-1" aria-labelledby="matchingItemsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="matchingItemsModalLabel">Matching Found Items</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="matchingItemsContent">
                        <!-- Matching items will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Verification Modal for Found Items -->
    <div class="modal fade" id="verificationModal" tabindex="-1" aria-labelledby="verificationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="verificationModalLabel">Verify Item Claim</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>To verify that you are the original reporter of this found item, please enter the verification code that was sent to your WhatsApp number when you first reported the item.</p>
                    
                    <div class="verification-input-group">
                        <label for="verification-code-input" class="form-label">Enter Verification Code:</label>
                        <input type="text" class="form-control verification-input" id="verification-code-input" placeholder="Enter your 6-character code" maxlength="6">
                    </div>
                    
                    <p class="forgot-code-tip">
                        <i class="bi bi-info-circle"></i> If you forgot your verification code, please contact the developer at <a href="tel:09038323588">09038323588</a>
                    </p>
                    
                    <div class="d-grid gap-2 mt-4">
                        <button type="button" class="btn btn-primary" id="confirmClaimBtn">Confirm and Mark as Claimed</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Verification Modal for Lost Items -->
    <div class="modal fade lost-verification-modal" id="lostVerificationModal" tabindex="-1" aria-labelledby="lostVerificationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="lostVerificationModalLabel">Verify Item Recovery</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body lost-verification-modal">
                    <div class="modal-icon">
                        <i class="bi bi-shield-check"></i>
                    </div>
                    <p>To verify that you are the original reporter of this lost item, please enter the verification code that was generated when you first reported the item.</p>
                    
                    <div class="verification-input-group">
                        <label for="lost-verification-code-input" class="form-label">Enter Verification Code:</label>
                        <input type="text" class="form-control verification-input" id="lost-verification-code-input" placeholder="Enter your 6-character code" maxlength="6">
                    </div>
                    
                    <p class="forgot-code-tip">
                        <i class="bi bi-info-circle"></i> If you forgot your verification code, please contact the developer at <a href="tel:09038323588">09038323588</a>
                    </p>
                    
                    <div class="d-grid gap-2 mt-4">
                        <button type="button" class="btn btn-primary" id="confirmRecoveredBtn">Confirm and Mark as Recovered</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Founder Details Modal -->
    <div class="modal fade" id="founderDetailsModal" tabindex="-1" aria-labelledby="founderDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="founderDetailsModalLabel">Founder Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="founderDetailsContent">
                        <!-- Founder details will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script>
        // Initialize Firebase
        const firebaseConfig = {
            databaseURL: "https://kwasu-lost-and-found-default-rtdb.firebaseio.com/"
        };
        
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // DOM Elements
        const lostItemForm = document.getElementById('lost-item-form');
        const foundItemForm = document.getElementById('found-item-form');
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const filterType = document.getElementById('filter-type');
        const searchResults = document.getElementById('search-results');
        const searchLoading = document.getElementById('search-loading');
        const toastContainer = document.querySelector('.toast-container');
        const toggleText = document.getElementById('toggle-text');
        const supportersList = document.getElementById('supporters-list');
        const supportersCounter = document.getElementById('supporters-counter');
        const particles = document.getElementById('particles');
        const matchingItemsModal = new bootstrap.Modal(document.getElementById('matchingItemsModal'));
        const matchingItemsContent = document.getElementById('matchingItemsContent');
        const verificationModal = new bootstrap.Modal(document.getElementById('verificationModal'));
        const verificationCodeInput = document.getElementById('verification-code-input');
        const confirmClaimBtn = document.getElementById('confirmClaimBtn');
        const lostVerificationModal = new bootstrap.Modal(document.getElementById('lostVerificationModal'));
        const lostVerificationCodeInput = document.getElementById('lost-verification-code-input');
        const confirmRecoveredBtn = document.getElementById('confirmRecoveredBtn');
        const founderDetailsModal = new bootstrap.Modal(document.getElementById('founderDetailsModal'));
        const founderDetailsContent = document.getElementById('founderDetailsContent');
        const reportDetailsModal = new bootstrap.Modal(document.getElementById('reportDetailsModal'));
        const reportDetailsContent = document.getElementById('reportDetailsContent');
        const copyTooltip = document.getElementById('copyTooltip');
        
        // Global variables
        let currentItemToClaim = null;
        let currentItemToRecover = null;
        let matchingFoundItems = [];
        let lastReportData = null;
        
        // Create floating particles
        function createParticles() {
            const particleCount = 20;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = Math.random() * 5 + 2;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particle.style.animationDelay = Math.random() * 10 + 's';
                particle.style.animation = 'float linear infinite';
                
                particles.appendChild(particle);
            }
        }
        
        // Generate random verification code
        function generateVerificationCode() {
            return Math.random().toString(36).substring(2, 8).toUpperCase();
        }
        
        // Animate counter
        function animateCounter(target, duration = 2000) {
            let start = 0;
            const increment = target / (duration / 16);
            
            const timer = setInterval(() => {
                start += increment;
                if (start >= target) {
                    supportersCounter.textContent = target;
                    clearInterval(timer);
                } else {
                    supportersCounter.textContent = Math.floor(start);
                }
            }, 16);
        }
        
        // Toggle Supporters List
        supportersList.addEventListener('show.bs.collapse', function () {
            toggleText.textContent = 'Hide Supporters';
            animateCounter(10);
        });
        
        supportersList.addEventListener('hide.bs.collapse', function () {
            toggleText.textContent = 'View Supporters';
            supportersCounter.textContent = '0';
        });
        
        // Show toast notification with action button
        function showToast(message, type = 'success', actionButton = null) {
            const toastId = 'toast-' + Date.now();
            const toastHtml = `
                <div id="${toastId}" class="toast toast-${type}" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header">
                        <i class="bi bi-${type === 'success' ? 'check-circle-fill text-success' : 'exclamation-triangle-fill text-danger'} me-2"></i>
                        <strong class="me-auto">KWASU Lost & Found</strong>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        ${message}
                        ${actionButton ? `<button type="button" class="btn btn-sm btn-primary mt-2 toast-action-btn">${actionButton.text}</button>` : ''}
                    </div>
                </div>
            `;
            
            toastContainer.insertAdjacentHTML('beforeend', toastHtml);
            const toastElement = document.getElementById(toastId);
            const toast = new bootstrap.Toast(toastElement, { autohide: false }); // Disable auto-hide
            toast.show();
            
            // Add click event if action button is provided
            if (actionButton) {
                const actionBtn = toastElement.querySelector('.toast-action-btn');
                actionBtn.addEventListener('click', () => {
                    actionButton.callback();
                    toast.hide();
                });
            }
            
            toastElement.addEventListener('hidden.bs.toast', () => {
                toastElement.remove();
            });
        }
        
        // Show report details modal
        function showReportDetailsModal(reportData) {
            let html = '';
            
            if (reportData.type === 'lost') {
                html = `
                    <div class="report-details-card">
                        <h5><i class="bi bi-search"></i> Lost Item Details</h5>
                        <div class="detail-row">
                            <div class="detail-label">Item Name:</div>
                            <div class="detail-value">${reportData.item}</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Location:</div>
                            <div class="detail-value">${reportData.location}</div>
                        </div>
                        ${reportData.last_seen ? `
                        <div class="detail-row">
                            <div class="detail-label">Last Seen:</div>
                            <div class="detail-value">${reportData.last_seen}</div>
                        </div>
                        ` : ''}
                        <div class="detail-row">
                            <div class="detail-label">Description:</div>
                            <div class="detail-value">${reportData.description}</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Contact:</div>
                            <div class="detail-value">${reportData.contact_info}</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Verification Code:</div>
                            <div class="detail-value">
                                <div class="verification-code-box" id="lostReportVerificationCode">
                                    ${reportData.verification_code}
                                </div>
                                <small class="text-muted">Click to copy</small>
                            </div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Reported On:</div>
                            <div class="detail-value">${new Date(reportData.timestamp).toLocaleString()}</div>
                        </div>
                        
                        <div class="importance-note">
                            <h6><i class="bi bi-exclamation-triangle-fill"></i> Why You Need to Save This Code</h6>
                            <p>This verification code is your proof that you reported this lost item. You will need it to:</p>
                            <ul>
                                <li>Verify your identity when marking the item as recovered</li>
                                <li>Prevent unauthorized users from marking your item as recovered</li>
                                <li>Ensure the security and integrity of your report</li>
                            </ul>
                            <p class="mb-0"><strong>Please save this code by taking a screenshot or writing it down!</strong></p>
                        </div>
                        
                        <div class="guide-section">
                            <h6><i class="bi bi-list-ol"></i> How to Mark Your Item as Recovered</h6>
                            <p>After you've recovered your lost item, please follow these steps to mark it as recovered:</p>
                            <ol>
                                <li>Return to this website (KWASU Lost & Found Portal)</li>
                                <li>Scroll down to the search section</li>
                                <li>Search for the item you reported using keywords</li>
                                <li>Find your reported item in the search results</li>
                                <li>Click the "Mark as Recovered" button</li>
                                <li>Enter your verification code when prompted</li>
                                <li>Confirm to mark the item as recovered</li>
                            </ol>
                            
                            <h6 class="mt-3"><i class="bi bi-heart-fill text-danger"></i> Why This Is Important</h6>
                            <p>Marking items as recovered helps keep our database clean and prevents confusion for other users. It also helps us track the success of this portal in reuniting lost items with their owners.</p>
                        </div>
                        
                        <div class="safety-alert">
                            <h6><i class="bi bi-shield-exclamation"></i> Safety Tips for Lost Item Reporters</h6>
                            <p>When someone contacts you claiming to have found your item:</p>
                            <ul>
                                <li>Ask for specific details about the item to verify ownership</li>
                                <li>Never share personal information beyond what is necessary</li>
                                <li>Meet in a safe, public place on campus to retrieve your item</li>
                                <li>If you suspect a scam, report the person's number to KWASU Safety Unit or contact the developer at 09038323588</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else if (reportData.type === 'found') {
                html = `
                    <div class="report-details-card">
                        <h5><i class="bi bi-gift"></i> Found Item Details</h5>
                        <div class="detail-row">
                            <div class="detail-label">Item Name:</div>
                            <div class="detail-value">${reportData.item}</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Location:</div>
                            <div class="detail-value">${reportData.location}</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Contact:</div>
                            <div class="detail-value">${reportData.contact_phone}</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Verification Code:</div>
                            <div class="detail-value">
                                <div class="verification-code-box" id="foundReportVerificationCode">
                                    ${reportData.verification_code}
                                </div>
                                <small class="text-muted">Click to copy</small>
                            </div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Reported On:</div>
                            <div class="detail-value">${new Date(reportData.timestamp).toLocaleString()}</div>
                        </div>
                        
                        <div class="importance-note">
                            <h6><i class="bi bi-exclamation-triangle-fill"></i> Why You Need to Save This Code</h6>
                            <p>This verification code is your proof that you reported this item. You will need it to:</p>
                            <ul>
                                <li>Verify your identity when someone claims this item</li>
                                <li>Mark the item as claimed after returning it to the owner</li>
                                <li>Prevent false claims and scams</li>
                            </ul>
                            <p class="mb-0"><strong>Please save this code by taking a screenshot or writing it down!</strong></p>
                        </div>
                        
                        <div class="guide-section">
                            <h6><i class="bi bi-list-ol"></i> How to Mark Item as Claimed After Returning to Owner</h6>
                            <p>After you've returned the item to its rightful owner, please follow these steps to mark it as claimed:</p>
                            <ol>
                                <li>Return to this website (KWASU Lost & Found Portal)</li>
                                <li>Scroll down to the search section</li>
                                <li>Search for the item you reported using keywords</li>
                                <li>Find your reported item in the search results</li>
                                <li>Click the "Mark as Claimed" button</li>
                                <li>Enter your verification code when prompted</li>
                                <li>Confirm to mark the item as claimed</li>
                            </ol>
                            
                            <h6 class="mt-3"><i class="bi bi-heart-fill text-danger"></i> Why This Is Important</h6>
                            <p>Marking items as claimed helps keep our database clean and prevents confusion for other users. It also helps us track the success of this portal in reuniting lost items with their owners.</p>
                        </div>
                        
                        <div class="safety-alert">
                            <h6><i class="bi bi-shield-exclamation"></i> Important Safety Information</h6>
                            <p>When someone claims this item:</p>
                            <ul>
                                <li>Ask for specific details about the item to verify ownership</li>
                                <li>Do not return the item until you are confident about the claimant's identity</li>
                                <li>If you notice a false claim, report the person's number to KWASU Safety Unit immediately</li>
                                <li>You can also contact the developer for assistance in reporting false claimants</li>
                            </ul>
                        </div>
                    </div>
                `;
            }
            
            reportDetailsContent.innerHTML = html;
            reportDetailsModal.show();
            
            // Add click event to verification code to copy to clipboard
            const codeElementId = reportData.type === 'lost' ? 'lostReportVerificationCode' : 'foundReportVerificationCode';
            const codeElement = document.getElementById(codeElementId);
            if (codeElement) {
                codeElement.addEventListener('click', (e) => {
                    const code = reportData.verification_code;
                    navigator.clipboard.writeText(code).then(() => {
                        // Show tooltip
                        copyTooltip.style.left = e.pageX + 'px';
                        copyTooltip.style.top = (e.pageY - 30) + 'px';
                        copyTooltip.classList.add('show');
                        
                        setTimeout(() => {
                            copyTooltip.classList.remove('show');
                        }, 2000);
                    }).catch(err => {
                        console.error('Could not copy text: ', err);
                        showToast('Failed to copy verification code.', 'error');
                    });
                });
            }
        }
        
        // Show matching items modal
        function showMatchingItemsModal(matchingItems) {
            let html = '';
            
            matchingItems.forEach((item, index) => {
                const date = new Date(item.timestamp).toLocaleString();
                html += `
                    <div class="matching-item-card">
                        <h5>Matching Item #${index + 1}</h5>
                        <div class="detail-row">
                            <div class="detail-label">Item Name:</div>
                            <div class="detail-value">${item.item}</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Found At:</div>
                            <div class="detail-value">${item.location}</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Reported On:</div>
                            <div class="detail-value">${date}</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-label">Contact:</div>
                            <div class="detail-value">
                                <a href="https://wa.me/${item.contact_phone.replace(/^0/, '234')}" target="_blank" class="contact-btn">
                                    <i class="bi bi-whatsapp"></i> WhatsApp: ${item.contact_phone}
                                </a>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            matchingItemsContent.innerHTML = html;
            matchingItemsModal.show();
        }
        
        // Report Lost Item
        lostItemForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const item = document.getElementById('lost-item').value;
            const location = document.getElementById('lost-location').value;
            const lastSeen = document.getElementById('lost-last-seen').value;
            const description = document.getElementById('lost-description').value;
            const contact = document.getElementById('lost-contact').value;
            
            try {
                // Generate verification code
                const verificationCode = generateVerificationCode();
                
                const newReportRef = database.ref('reports').push();
                const reportData = {
                    type: 'lost',
                    item: item, // Keep original formatting
                    location: location, // Keep original formatting
                    last_seen: lastSeen, // Keep original formatting
                    description: description, // Keep original formatting
                    contact_info: contact,
                    verification_code: verificationCode,
                    recovered: false,
                    reporter: 'website',
                    timestamp: new Date().toISOString()
                };
                
                await newReportRef.set(reportData);
                
                lostItemForm.reset();
                
                // Show toast with action button and verification code
                const message = `Your lost item has been reported successfully! Your verification code is "${verificationCode}". Please save it as you will need it later.`;
                showToast(message, 'success', {
                    text: 'View Details',
                    callback: () => {
                        showReportDetailsModal(reportData);
                    }
                });
                
                // Check for matching found items
                matchingFoundItems = await findMatchingItems(item, 'found');
                if (matchingFoundItems.length > 0) {
                    const matchMessage = `We found ${matchingFoundItems.length} matching item(s) that were reported found!`;
                    
                    // Show toast with action button
                    showToast(matchMessage, 'success', {
                        text: 'View Matching Items',
                        callback: () => {
                            showMatchingItemsModal(matchingFoundItems);
                        }
                    });
                }
            } catch (error) {
                console.error('Error reporting lost item:', error);
                showToast('Failed to report lost item. Please try again.', 'error');
            }
        });
        
        // Report Found Item
        foundItemForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const item = document.getElementById('found-item').value;
            const location = document.getElementById('found-location').value;
            const contact = document.getElementById('found-contact').value;
            
            try {
                // Generate verification code
                const verificationCode = generateVerificationCode();
                
                const newReportRef = database.ref('reports').push();
                const reportData = {
                    type: 'found',
                    item: item, // Keep original formatting
                    location: location, // Keep original formatting
                    contact_phone: contact,
                    verification_code: verificationCode,
                    claimed: false,
                    reporter: 'website',
                    timestamp: new Date().toISOString()
                };
                
                await newReportRef.set(reportData);
                
                foundItemForm.reset();
                
                // Show toast with action button and verification code
                const message = `Thanks for reporting an item, Please view your submission code "${verificationCode}" and save it as you will need it later.`;
                showToast(message, 'success', {
                    text: 'View Details',
                    callback: () => {
                        showReportDetailsModal(reportData);
                    }
                });
                
                // Show safety warning
                setTimeout(() => {
                    const safetyMessage = `IMPORTANT: When someone contacts you to claim this item, please ask for verification details (color, brand, unique features) to confirm ownership. Do not return the item without proper verification.`;
                    showToast(safetyMessage, 'success');
                }, 1000);
            } catch (error) {
                console.error('Error reporting found item:', error);
                showToast('Failed to report found item. Please try again.', 'error');
            }
        });
        
        // Search for Items
        searchBtn.addEventListener('click', performSearch);
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') performSearch();
        });
        
        async function performSearch() {
            const searchTerm = searchInput.value.trim().toLowerCase();
            const filter = filterType.value;
            
            if (!searchTerm) {
                showToast('Please enter a search term', 'error');
                return;
            }
            
            searchLoading.style.display = 'block';
            searchResults.innerHTML = '';
            
            try {
                const snapshot = await database.ref('reports').once('value');
                const reports = snapshot.val();
                
                if (!reports) {
                    searchResults.innerHTML = '<p class="text-center">No items found in the database.</p>';
                    searchLoading.style.display = 'none';
                    return;
                }
                
                const results = [];
                const twoDaysAgo = new Date();
                twoDaysAgo.setDate(twoDaysAgo.getDate() - 2);
                
                Object.entries(reports).forEach(([key, report]) => {
                    // Filter out items that were claimed/recovered more than 2 days ago
                    if ((report.claimed && report.claimed_at && new Date(report.claimed_at) < twoDaysAgo) ||
                        (report.recovered && report.recovered_at && new Date(report.recovered_at) < twoDaysAgo)) {
                        return;
                    }
                    
                    if (filter !== 'all' && report.type !== filter) return;
                    
                    const searchText = `${report.item} ${report.location} ${report.description || ''}`.toLowerCase();
                    if (searchText.includes(searchTerm)) {
                        results.push({ ...report, id: key });
                    }
                });
                
                // Sort results by timestamp (most recent first)
                results.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                
                if (results.length === 0) {
                    searchResults.innerHTML = `<p class="text-center">No items found matching "${searchTerm}".</p>`;
                } else {
                    let resultsHtml = `<h4 class="mb-3">Found ${results.length} item(s) matching "${searchTerm}":</h4>`;
                    
                    results.forEach(report => {
                        const date = new Date(report.timestamp).toLocaleString();
                        const isClaimed = report.claimed || false;
                        const isRecovered = report.recovered || false;
                        const cardClass = isClaimed || isRecovered ? 'result-item claimed' : 'result-item';
                        
                        if (report.type === 'found') {
                            const badgeClass = isClaimed ? 'badge-claimed' : 'badge-found';
                            const badgeText = isClaimed ? 'Claimed' : 'Found';
                            
                            resultsHtml += `
                                <div class="${cardClass}">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div>
                                            <h5>${report.item}</h5>
                                            <div class="meta">
                                                <i class="bi bi-geo-alt"></i> ${report.location}
                                            </div>
                                            <div class="meta">
                                                <i class="bi bi-clock"></i> ${date}
                                            </div>
                                            ${report.description ? `<p class="mt-2">${report.description}</p>` : ''}
                                        </div>
                                        <span class="badge ${badgeClass}">${badgeText}</span>
                                    </div>
                                    <div class="mt-3">
                                        <i class="bi bi-whatsapp"></i> 
                                        <a href="https://wa.me/${report.contact_phone.replace(/^0/, '234')}" target="_blank" class="fw-bold">Contact via WhatsApp: ${report.contact_phone}</a>
                                    </div>
                                    ${!isClaimed ? `
                                        <div class="found-item-actions mt-3">
                                            <button class="btn btn-success btn-sm mark-claimed-btn" data-id="${report.id}" data-phone="${report.contact_phone}">
                                                <i class="bi bi-check-circle"></i> Mark as Claimed
                                            </button>
                                        </div>
                                    ` : `
                                        <div class="found-item-actions mt-3">
                                            <span class="claimed-status"><i class="bi bi-check-circle"></i> Successfully Claimed</span>
                                        </div>
                                    `}
                                </div>
                            `;
                        } else {
                            const badgeClass = isRecovered ? 'badge-recovered' : 'badge-lost';
                            const badgeText = isRecovered ? 'Recovered' : 'Lost';
                            
                            resultsHtml += `
                                <div class="${cardClass}">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div>
                                            <h5>${report.item}</h5>
                                            <div class="meta">
                                                <i class="bi bi-geo-alt"></i> ${report.location}
                                            </div>
                                            ${report.last_seen ? `
                                                <div class="meta">
                                                    <i class="bi bi-eye"></i> Last seen: ${report.last_seen}
                                                </div>
                                            ` : ''}
                                            <div class="meta">
                                                <i class="bi bi-clock"></i> ${date}
                                            </div>
                                            ${report.description ? `<p class="mt-2">${report.description}</p>` : ''}
                                        </div>
                                        <span class="badge ${badgeClass}">${badgeText}</span>
                                    </div>
                                    ${report.contact_info ? `
                                        <div class="mt-3">
                                            <i class="bi bi-whatsapp"></i> 
                                            <a href="https://wa.me/${report.contact_info.replace(/^0/, '234')}" target="_blank" class="fw-bold">Contact via WhatsApp: ${report.contact_info}</a>
                                        </div>
                                    ` : ''}
                                    ${!isRecovered ? `
                                        <div class="found-item-actions mt-3">
                                            <button class="btn btn-info btn-sm mark-recovered-btn" data-id="${report.id}" data-phone="${report.contact_info}">
                                                <i class="bi bi-check-circle"></i> Mark as Recovered
                                            </button>
                                        </div>
                                    ` : `
                                        <div class="found-item-actions mt-3">
                                            <span class="claimed-status"><i class="bi bi-check-circle"></i> Successfully Recovered</span>
                                        </div>
                                    `}
                                </div>
                            `;
                        }
                    });
                    
                    searchResults.innerHTML = resultsHtml;
                    
                    // Add event listeners to "Mark as Claimed" buttons
                    document.querySelectorAll('.mark-claimed-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const itemId = this.getAttribute('data-id');
                            const itemPhone = this.getAttribute('data-phone');
                            currentItemToClaim = { id: itemId, phone: itemPhone };
                            
                            // Clear the verification code input
                            verificationCodeInput.value = '';
                            
                            verificationModal.show();
                        });
                    });
                    
                    // Add event listeners to "Mark as Recovered" buttons
                    document.querySelectorAll('.mark-recovered-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const itemId = this.getAttribute('data-id');
                            const itemPhone = this.getAttribute('data-phone');
                            currentItemToRecover = { id: itemId, phone: itemPhone };
                            
                            // Clear the verification code input
                            lostVerificationCodeInput.value = '';
                            
                            lostVerificationModal.show();
                        });
                    });
                }
            } catch (error) {
                console.error('Error searching items:', error);
                showToast('Failed to search items. Please try again.', 'error');
            } finally {
                searchLoading.style.display = 'none';
            }
        }
        
        // Find matching items (for lost item reporting)
        async function findMatchingItems(searchItem, type) {
            try {
                const snapshot = await database.ref('reports').once('value');
                const reports = snapshot.val();
                
                if (!reports) return [];
                
                const searchKeywords = searchItem.toLowerCase().split(' ');
                const matchingItems = [];
                
                Object.entries(reports).forEach(([key, report]) => {
                    if (report.type === type) {
                        const reportText = `${report.item} ${report.description || ''}`.toLowerCase();
                        const matchScore = searchKeywords.reduce((score, keyword) => {
                            return score + (reportText.includes(keyword) ? 1 : 0);
                        }, 0);
                        
                        if (matchScore > 0) {
                            matchingItems.push({...report, matchScore});
                        }
                    }
                });
                
                return matchingItems.sort((a, b) => b.matchScore - a.matchScore);
            } catch (error) {
                console.error('Error finding matching items:', error);
                return [];
            }
        }
        
        // Handle "Confirm and Mark as Claimed" button
        confirmClaimBtn.addEventListener('click', async () => {
            if (!currentItemToClaim) return;
            
            const enteredCode = verificationCodeInput.value.trim().toUpperCase();
            
            if (!enteredCode) {
                showToast('Please enter your verification code', 'error');
                return;
            }
            
            try {
                // Get the report to verify the code
                const reportSnapshot = await database.ref(`reports/${currentItemToClaim.id}`).once('value');
                const reportData = reportSnapshot.val();
                
                if (!reportData) {
                    showToast('Report not found', 'error');
                    return;
                }
                
                // Verify the code
                if (reportData.verification_code !== enteredCode) {
                    showToast('Invalid verification code. Please try again.', 'error');
                    return;
                }
                
                // Mark as claimed
                await database.ref(`reports/${currentItemToClaim.id}`).update({
                    claimed: true,
                    claimed_at: new Date().toISOString()
                });
                
                verificationModal.hide();
                showToast('Item has been marked as claimed successfully!');
                
                // Refresh search results if visible
                if (searchResults.innerHTML !== '') {
                    performSearch();
                }
                
                currentItemToClaim = null;
            } catch (error) {
                console.error('Error marking item as claimed:', error);
                showToast('Failed to mark item as claimed. Please try again.', 'error');
            }
        });
        
        // Handle "Confirm and Mark as Recovered" button
        confirmRecoveredBtn.addEventListener('click', async () => {
            if (!currentItemToRecover) return;
            
            const enteredCode = lostVerificationCodeInput.value.trim().toUpperCase();
            
            if (!enteredCode) {
                showToast('Please enter your verification code', 'error');
                return;
            }
            
            try {
                // Get the report to verify the code
                const reportSnapshot = await database.ref(`reports/${currentItemToRecover.id}`).once('value');
                const reportData = reportSnapshot.val();
                
                if (!reportData) {
                    showToast('Report not found', 'error');
                    return;
                }
                
                // Verify the code
                if (reportData.verification_code !== enteredCode) {
                    showToast('Invalid verification code. Please try again.', 'error');
                    return;
                }
                
                // Mark as recovered
                await database.ref(`reports/${currentItemToRecover.id}`).update({
                    recovered: true,
                    recovered_at: new Date().toISOString()
                });
                
                lostVerificationModal.hide();
                showToast('Item has been marked as recovered successfully!');
                
                // Refresh search results if visible
                if (searchResults.innerHTML !== '') {
                    performSearch();
                }
                
                currentItemToRecover = null;
            } catch (error) {
                console.error('Error marking item as recovered:', error);
                showToast('Failed to mark item as recovered. Please try again.', 'error');
            }
        });
        
        // Initialize
        window.addEventListener('load', () => {
            createParticles();
        });
    </script>
</body>
</html>
